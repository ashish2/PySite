{% extends "q_a_bbase.html" %}

{% block content %}
	<div class="main">
		<!-- Posts -->
		<ul>
			{% for post in posts.object_list %}
			<div class="posts">
				
				<div class="title">
					<a href="{% url q_a.views.view_post_id post.id %}">{{ post.title }}</a>
				</div>
				<div class="time">
					{{ post.date }}
				</div>
				<div class="body">
					{{post.content|linebreaks}}
					
					{% if post.has_voted != 1 %}
						<a href="{% url q_a.views.vote post.pk 1 %}?from={{fromUrl|urlencode}}" value=1>Vote up</a>
					{% endif %}
					
					{% if post.has_voted != -1 %}
						<a href="{% url q_a.views.vote post.pk -1 %}" value=-1>Vote down</a>
					{% endif %}
					
				</div>
				{% if post.post_set.all %}
					<ul class="replies">
						{% for i in post.post_set.all %}
								<li>
									{{ i.id }}: {{i.content }}
									
								</li>
						{% endfor %}
					</ul>
				{% endif %}
					
				<!-- Comments -->
				<div class ="commentlink">
					<a href="{% url q_a.views.show_comment_form post.pk %}?from={{fromUrl|urlencode}}">
						Comment
					</a>
					<a href="{% url q_a.views.share post.pk %}">
						Share
					</a>
				</div>
				<!-- Comments/ -->
			</div>
			{% endfor %}
		</ul>
		
		<!-- Next/Prev page links -->
		{% if posts and posts.paginator.num_pages > 1  %}
		<div class="pagination" style="margin-top: 20px; margin-list: -20px;">
			<span class="step-links">
				{% if posts.has_previous %}
					<a href="?page={{posts.previous_page_number}}">
						newer entries &lt;&lt;
					</a>
				{% endif %}
				<span class="current">
					&nbsp;Page {{ posts.number }} of {{ posts.paginator.num_pages }}
				</span>
				{% if posts.has_next %}
					<a href="?page={{posts.next_page_number}}">
						&gt;&gt; older entries
					</a>
				{% endif %}
			</span>
		</div>
		{% endif %}
	</div>
{% endblock %}

